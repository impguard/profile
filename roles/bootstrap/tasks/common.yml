# Gather facts

- name: Gather brew facts
  shell:
    brew --prefix
  register: brewpath

- name: Create brew facts
  set_fact:
    brew_prefix: "{{ brewpath.stdout }}"

# fzf, ag, git

- name: Install useful utilities (screen, fzf, ag...)
  homebrew:
    name:
    - screen
    - fzf
    - ag
    - shellcheck
    - git

# Neovim

- name: Install neovim
  homebrew:
    name: neovim

- name: Setup plug directory
  file:
    path: ~/.local/share/nvim/site/autoload/
    state: directory

- name: Setup plug
  get_url:
    url: https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim
    dest: ~/.local/share/nvim/site/autoload/plug.vim

- name: Setup neovim
  shell: nvim +PlugInstall +qall

# autojump

- name: Install autojump
  homebrew:
    name: autojump

- name: Sourcing autojump in bashrc
  blockinfile:
    path: ~/.bashrc
    marker: "# {mark} ANSIBLE - autojump"
    content: source {{ brew_prefix }}/share/autojump/autojump.bash
